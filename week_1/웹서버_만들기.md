# 웹서버 만들기

## VPC, 서브넷, 인터넷 게이트웨이, 라우팅 테이블 생성

웹서버를 생성하기에 앞서 먼저 `네트워크를 구축`해보겠습니다.

네트워크를 구축한다는 것은 내가 인터넷 세상에서 살 공간을 마련한다는 것과 같습니다.   
우리는 AWS 계정을 생성해 AWS라는 인터넷 세상에 살게 되었습니다.   
그럼 VPC라는 `빌라`를 짓고, 서브넷이라는 `호`에 살게 됩니다.   
빌라의 현관에는 인터넷 게이트웨이라는 `문`을 달고, 라우터라는 `도어락`을 설치합니다.   

> <h3>VPC 생성</h3>

![image](https://user-images.githubusercontent.com/43658658/134436316-08f20892-152b-4420-a3a5-f7b7489bf7ef.png)

AWS 콘솔의 상단에 검색창에 `VPC`를 입력합니다.   
하단에 나타나는 항목 중 `VPC`를 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134436441-9a7650f2-8451-40e5-a2ec-2b0140e22d1f.png)

왼쪽 탭에 [VPC]를 클릭하고, 우측에 [VPC 생성] 버튼을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134436767-8edcb86c-c34d-4288-852d-0c62960c67df.png)

`이름`과 `IPv4`를 입력합니다.   
`IPv4`는 VPC의 경우 `10.m.0.0/16`으로 입력해주시고, 이후의 서브넷의 경우 `10.m.n.0/24`로 입력해주세요.   
`테넌시`는 기본값과 전용이 있는데, 기본값은 인터넷망을 사용하는 것이고, 전용은 VPC 내에서만 사용하는 것입니다.

하단에 [VPC 생성] 버튼을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134437378-c64c528b-4b42-43b8-ba9e-c1f497eabd71.png)

VPC는 이후에 `VPC ID` 또는 `VPC 이름`으로 구분합니다.

> <h3>서브넷 생성</h3>

![image](https://user-images.githubusercontent.com/43658658/134437550-1ae32b03-83b4-4e18-b507-dcd36fc0b365.png)

[서브넷] > [서브넷 생성]을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134437770-d33a5f26-6aee-473a-b1fe-ba37e4c8794a.png)

앞서 생성한 `VPC`를 선택합니다.   
적절한 서브넷 이름을 입력하고, `IPv4`는 VPC 내부에 있어야 하므로 `10.m.0.0/16`으로 입력했다면 그대로 이어받아 3번째 숫자(`10.m.n.0/24`)를 정합니다.
[서브넷 생성] 버튼을 클릭합니다.

> <h3>인터넷 게이트웨이 생성</h3>

![image](https://user-images.githubusercontent.com/43658658/134437996-1d58d824-f0c6-412d-a401-6e9d9b5570db.png)

다음으로 인터넷 게이트웨이를 VPC에 달아줍시다.   
[인터넷 게이트웨이] > [인터넷 게이트웨이 생성]을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134438144-9225e3f6-b2b9-455b-913a-fc25e87c4a29.png)

적절한 `인터넷 게이트웨이 이름`을 설정해주고 [인터넷 게이트웨이 생성] 버튼을 눌러서 생성합니다.   

![image](https://user-images.githubusercontent.com/43658658/134438270-f10f392a-b795-4779-af11-390b8420fc58.png)

생성한 상태에서 우측 상단의 [작업] > [VPC 연결]을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134438319-069d6242-f4d4-4f79-9a7b-7c4e6aa8f4fa.png)

앞서 생성한 `VPC`를 선택하고 [인터넷 게이트웨이 연결] 버튼을 눌러서 `인터넷 게이트웨이`를 `VPC`에 달아줍니다.

> <h3>라우팅 테이블 연결</h3>

인터넷 게이트웨이를 생성하면 라우터 역시 자동으로 생성됩니다.
인터넷 게이트웨이를 VPC에 달아주었다면, `라우터`에서 인터넷 게이트웨이의 개방 범위를 설정해야 합니다.
왼쪽 탭의 [라우팅 테이블]을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134438538-430df0e9-1da7-4927-9ed0-3af33a02db6f.png)

앞서 연결한 VPC와 연결된 라우터를 찾아 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134438667-8927bd12-6b52-4db5-9128-5b67f0c36d63.png)

[라우팅 편집] 버튼을 클릭합니다.

![image](https://user-images.githubusercontent.com/43658658/134438836-47e67323-dbb1-41be-bc69-b2af6af9718e.png)

`0.0.0.0/0`을 입력하여 모든 인터넷망에 대해서 개방합니다.   
인터넷 게이트웨이를 개방해야 하므로 대상은 `인터넷 게이트웨이`로 선택합니다.   
선택하면 앞서 생성한 인터넷 게이트웨이가 나타납니다. 그것을 클릭해줍니다.
[변경 사항 저장] 버튼을 누릅니다.

## EC2 웹서버 생성
